<navbar></navbar>
<div class="container" id = "profile">
  <div class="row">
    <div class="col-md-3 col-sm-3 left">
      <div class="ui card">
        <div class="image">
          <img ng-if="currentUser.profilePhoto.dataURI" ng-src="{{currentUser.profilePhoto.dataURI}}" ng-click = "uploadProfilePic()">
          <img ng-if="!currentUser.profilePhoto.dataURI" ng-src="https://semantic-ui.com/images/avatar/small/elliot.jpg" ng-click = "uploadProfilePic()">
          <form id = "uploadProfilePicForm">
            <input type="file" id = "uploadProfilePic" onchange="angular.element(this).scope().onFile(this.files[0])" style = "display:none;">
          </form>
          <i class="remove icon" ng-click = "uploadProfilePic()"></i>
        </div>
        <div class="content">
          <a class="header">{{currentUser.name.firstName}}&nbsp;{{currentUser.name.lastName}}</a>
          <div class="meta">
            <span class="date">Joined in 2013</span>
          </div>
          <div class="description">
            <div class="price-container">
              <div ng-if="!edit.ratePerHour.editing">
                <strong>Price:</strong>{{currentUser.ratePerHour.value || "Not set"}}
                <a class="edit-action" ng-click="editratePerHour($event)">
                  <i class="write icon"></i>
                </a>
              </div>
              <div ng-if="edit.ratePerHour.editing" class="edit-price-container">
                <div class="ui right labeled input">
                  <input type="text" class="price-value" placeholder="Enter price per hour">
                  <div class="ui dropdown label">
                    <span uib-dropdown on-toggle="toggled(open)">
                      <div class="text" uib-dropdown-toggle>
                        INR
                        <i class="dropdown icon"></i>
                      </div>
                      <ul class="dropdown-menu" uib-dropdown-menu>
                        <li>INR</li>
                        <li>USD</li>
                      </ul>
                    </span>
                  </div>
                </div>
                <div class="ui buttons">
                  <button class="ui primary button" ng-class = "{'loading': edit.ratePerHour.progress}" ng-disabled="edit.ratePerHour.progress" ng-click="saveSpecialization()">Save</button>
                  <div class="or"></div>
                  <button class="ui button" ng-disabled="edit.ratePerHour.progress" ng-click="cancelEditSpecialization($event)">Cancel</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="extra">
          <div class="ui star rating">
            <i class="icon active"></i>
            <i class="icon active"></i>
            <i class="icon active"></i>
            <i class="icon active"></i>
            <i class="icon "></i>
          </div>
        </div>
      </div>
      <div class="ui vertical steps">
        <a class="active step">
          <div class="content">
            <div class="description"><i class="info icon"></i>Details</div>
          </div>
        </a>
        <a class="step">
          <div class="content">
            <div class="description"><i class="info icon"></i>Classes</div>
          </div>
        </a>
        <a class="step">
          <div class="content">
            <div class="description"><i class="info icon"></i>Teachers</div>
          </div>
        </a>
      </div>
    </div>
    <div class="col-md-9 col-sm-9 right">
      <div class="row">
        <div class="ui attached message">
          <div class="header">
            <span class="title">About {{currentUser.name.firstName}}</span>
            <div class="action-container">
              <a ng-show="!edit.basicInfo.editing" class="edit-action" ng-click="editBasicInfo($event)">
                <i class="write icon"></i>
              </a>
              <div ng-show="edit.basicInfo.editing" class="ui buttons">
                <button class="ui primary button" ng-class = "{'loading': edit.basicInfo.progress}" ng-disabled="edit.basicInfo.progress" ng-click="saveBasicInfo()">Save</button>
                <div class="or"></div>
                <button class="ui button" ng-disabled="edit.basicInfo.progress" ng-click="cancelEditBasicInfo()">Cancel</button>
              </div>
            </div>
          </div>
        </div>
        <div class="ui segment">
          <p ng-show="!edit.basicInfo.editing">
            {{currentUser.basicInfo}}
          </p>
          <textarea autofocus class="editable-area" ng-disabled="edit.basicInfo.progress" ng-model="edit.basicInfo.data" ng-show="edit.basicInfo.editing">{{edit.basicInfo.data}}</textarea>
        </div>
      </div>

      <div class="row" ng-if = "currentUser.isTeacher">
        <div class="ui attached message">
          <div class="header">
            <span class="title">Specialization</span>
            <div class="action-container">
              <a ng-show="!edit.specialization.editing" class="edit-action" ng-click="editSpecialization($event)">
                <i class="write icon"></i>
              </a>
              <div ng-show="edit.specialization.editing" class="ui buttons">
                <button class="ui primary button" ng-class = "{'loading': edit.specialization.progress}" ng-disabled="edit.specialization.progress" ng-click="saveSpecialization()">Save</button>
                <div class="or"></div>
                <button class="ui button" ng-disabled="edit.specialization.progress" ng-click="cancelEditSpecialization($event)">Cancel</button>
              </div>
            </div>
          </div>
        </div>
        <div class="ui segment">
          <div ng-show="edit.specialization.editing">


<!--     <div class="autocompletedemoFloatingLabel" layout="column" ng-cloak="">
        <form name="searchForm" ng-submit="$event.preventDefault()">
            <div layout-gt-sm="row">
            <md-autocomplete md-floating-label="Academic Topic" 
                            md-item-text="item.Title"
                            md-items="item in ctrl.data" 
                            md-search-text-change="ctrl.querySearch(ctrl.searchText)"
                            md-search-text="ctrl.searchText" 
                            md-selected-item="ctrl.selectedItem" 
                            md-no-cache="ctrl.noCache" 
                            md-input-maxlength="30" 
                            md-input-minlength="2" 
                            md-input-name="autocompleteField" 
                            required=""
                            class="md-block"
                            flex-gt-sm="55">
              <md-item-template>
                <span md-highlight-text="ctrl.searchText">{{item.Title}}</span>
              </md-item-template>
              <div ng-messages="searchForm.autocompleteField.$error" ng-if="searchForm.autocompleteField.$touched">
                <div ng-message="required">Please enter a topic you want to teach.</div>
                <div ng-message="minlength">Your topic is not long enough.</div>
                <div ng-message="maxlength">Your topic is too long.</div>
              </div>
            </md-autocomplete>

          <md-input-container class="md-block" flex-gt-sm="30">
            <label>Level</label>
            <md-select ng-model="user.state">
              <md-option value="Basic">Basic</md-option>
              <md-option value="Intermediate">Intermediate</md-option>
              <md-option value="Advanced">Advanced</md-option>
              <md-option value="Expert">Expert</md-option>
            </md-select>
          </md-input-container>

          <md-input-container class="md-block" flex-gt-sm="15">
            <md-button type="button" class="md-raised md-primary"><i class="plus icon"></i></md-button>
            <md-button type="button" class="md-raised md-warn"><i class="minus icon"></i></md-button>
          </md-input-container>

          </div>
        </form>
    </div> -->


            <div ng-repeat="specialization in edit.specialization.data" class="ui fluid input" id="addSpecializationContainer">
            <div class="ui search">
              <!-- <div class="results" auto-close="specialization.status.searchResultsOpen" ng-show="specialization.status.searchResultsOpen" ng-click="specialization.status.searchResultsOpen = false">
                <a class="result">
                  <div class="content">
                    <div class="title">United Arab Emirates</div>
                  </div>
                </a>
                <a class="result">
                  <div class="content">
                    <div class="title">United States</div>
                  </div>
                </a>
                <a class="result">
                  <div class="content">
                    <div class="title">Burundi</div>
                  </div>
                </a>
              </div>
              <input type="text" name="topic" placeholder="Enter topic you want to teach..." ng-model="specialization.topic" ng-change="specialization.status.searchResultsOpen = true"> -->
              <div class="ui icon input topic" ng-class="{'loading': specialization.loadingResults}">
                <input type="text" ng-model="specialization.topicName" placeholder="Enter topic you want to teach..." uib-typeahead="topic for topic in getLocation($index, $viewValue)" typeahead-loading="loading" typeahead-no-results="noResults" class="form-control">
                <i class="icon"></i>
              </div>
<!--     <i ng-show="specialization.loadingResults" class="glyphicon glyphicon-refresh"></i>
    <div ng-show="true">
      <i class="glyphicon glyphicon-remove"></i> No Results Found
    </div> -->
            </div>
<!--               <select name="level" ng-model="specialization.level">
                <option selected=selected>Basic</option>
                <option>Intermediate</option>
                <option>Advanced</option>
                <option>Expert</option>
              </select> -->
<!--               <div class="ui dropdown label" auto-close="specialization.status.levelOpen" ng-click="specialization.status.levelOpen = !specialization.status.levelOpen">
                <div class="text">Basic</div>
                <i class="dropdown icon"></i>
                <div class="menu" ng-show="specialization.status.levelOpen">
                  <div class="item">Basic</div>
                  <div class="item">Intermediate</div>
                  <div class="item">Advanced</div>
                  <div class="item">Expert</div>
                </div>
              </div> -->
              <div class="btn-group" uib-dropdown>
                <button id="single-button" type="button" class="btn btn-default" uib-dropdown-toggle>
                  {{specialization.level !== "" ? specialization.level : "Level" }} <i class="caret"></i>
                </button>
                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                  <li role="menuitem"><a href="#" ng-click="setLevel($index, 'Basic')">Basic</a></li>
                  <li role="menuitem"><a href="#" ng-click="setLevel($index, 'Intermediate')">Intermediate</a></li>
                  <li role="menuitem"><a href="#" ng-click="setLevel($index, 'Advanced')">Advanced</a></li>
                  <li role="menuitem"><a href="#" ng-click="setLevel($index, 'Expert')">Expert</a></li>
                </ul>
              </div>
              <button class="ui green button" name="addSpecialization" ng-click="addSpecialization()" value="Add" ng-class="{'hidden-visibility': ($index + 1) !== edit.specialization.data.length}">
                <i class="plus icon"></i>
              </button>
              <button class="ui red button" name="removeSpecialization" ng-click="removeSpecialization($index)" value="Remove" ng-class="{'hidden-visibility': $index === 0 || ($index + 1) !== edit.specialization.data.length}">
                <i class="minus icon"></i>
              </button>
              <!-- <input type="button" name="addSpecialization" ng-click="addSpecialization()" value="Add" ng-if="($index + 1) === edit.specialization.data.length">
              <input type="button" name="removeSpecialization" ng-click="removeSpecialization($index)" value="Remove" ng-if="$index !== 0 && ($index + 1) === edit.specialization.data.length"> -->
            </div>
          </div>
          <ul class="specialization-container">
            <li ng-repeat="topic in currentUser.specialization">
              <a href="#" class="topic-name">{{topic.topic.topicName}}</a>
              <a href="#" class="topic-level">{{topic.level}}</a>
              <a href="#" class="topic-delete" ng-click="deleteSpecialization($event, $index, topic._id)" ng-show="edit.specialization.editing">
                <i ng-show="!topic.progress" class="remove red icon"></i>
                <i ng-show="topic.progress" class="ui mini active inline loader"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="row" ng-if = "currentUser.isTeacher">
        <div class="ui attached message">
          <div class="header">
            <span class = "title">Demo Videos</span>
            <div class="action-container">
              <a class="edit-action" ng-click="uploadVideo()">
                <i class="plus icon"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="ui segment" ng-if="demoVideos.length > 0">
          <video-slider slides="demoVideos" click-handle="showVideoModal(index)"></video-slider>
        </div>
        
        <form id = "uploadVideoForm">
          <input type="file" id = "uploadVideo" onchange="angular.element(this).scope().onVideoSelect(this.files)" style = "display:none;">
        </form>

      </div>

      <div class="row">
        <div class="ui attached message">
          <div class="header">
            <span class = "title">Education</span>
            <div class="action-container">
              <a class="edit-action" ng-click="showAddEducationModal($event)">
                <i class="plus icon"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="ui segment">
          <div class="education-container">
            <div ng-repeat="education in currentUser.education" class="education-item">
              <span class="education-icon"><i class="student icon"></i></span>
              <span class="education-details">
                <p class="school-name">{{education.schoolName}}</p>
                <p class="degree-name">{{education.degreeName}}, {{education.field}}</p>
                <p class="period"></p>
              </span>
              <span class="education-action">
                <i class="write icon"></i>
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="ui attached message">
          <div class="header">
            Experiences
          </div>
        </div>
        <div class="ui segment">
          <p>
            This is the details
          </p>
        </div>
      </div>

      <div class="row" ng-if = "currentUser.isTeacher">
        <div class="ui attached message">
          <div class="header">
            Reviews & Ratings
          </div>
        </div>
        <div class="ui segment">
          <p>
            This is the details
          </p>
        </div>
      </div>

      <div class="row" ng-if = "currentUser.isTeacher">
        <div class="ui attached message">
          <div class="header">
            Availability
            <button class="ui button primary" ng-click = "updateAvailability()">Save</button>
          </div>
        </div>
        <div class="ui segment">
          <p>
            <div ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar = "availabilityCalendar"></div>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
